# Gitea 插件系统 Docker 镜像
# 基于官方 Gitea 镜像

FROM gitea/gitea:latest

# 切换到 root 用户进行配置
USER root

# 创建插件目录
RUN mkdir -p /data/gitea/plugins/installed && \
    chown -R git:git /data/gitea/plugins

# 切换回 git 用户
USER git

# 暴露端口
EXPOSE 3000 22

# 使用官方入口点
ENTRYPOINT ["/usr/bin/entrypoint"]
CMD ["/bin/s6-svscan", "/etc/s6"]
